Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ù†Ù‡Ø§ÛŒÛŒ: Ø³Ø§Ø®Øª Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ Ø¨Ø±Ø§ÛŒ Saino Elite

Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø¬Ø¯ÛŒØ¯ Saino Elite Ø¨Ù‡ Ø´Ù…Ø§ Ø§Ø¬Ø§Ø²Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ ØªØ§ Ø¨Ù‡ Ø±Ø§Ø­ØªÛŒ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù¾Ø§ÛŒØªÙˆÙ†ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø³Ø§Ø²ÛŒØ¯ Ùˆ Ø¢Ù†â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ù¾ÙˆÛŒØ§ Ø¨Ù‡ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯. Ù‡Ø± Ø§Ø¨Ø²Ø§Ø± Ø¬Ø¯ÛŒØ¯ØŒ ÛŒÚ© Ù‚Ø§Ø¨Ù„ÛŒØª ØªØ§Ø²Ù‡ Ø¨Ù‡ Agent Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø´Ù…Ø§ Ù…ÛŒâ€ŒØ¨Ø®Ø´Ø¯.

Ù…ÙÙ‡ÙˆÙ… Ø§ØµÙ„ÛŒ
Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù¾Ø§ÛŒØªÙˆÙ† Ù…ÙˆØ¬ÙˆØ¯ Ø¯Ø± Ù¾ÙˆØ´Ù‡ tools/ Ø±Ø§ Ø§Ø³Ú©Ù† Ú©Ø±Ø¯Ù‡ Ùˆ Ù‡Ø± Ú©Ù„Ø§Ø³ÛŒ Ú©Ù‡ Ø§Ø² BaseTool Ø§Ø±Ø«â€ŒØ¨Ø±ÛŒ Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ Ø±Ø§ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† ÛŒÚ© Ø§Ø¨Ø²Ø§Ø± Ø¬Ø¯ÛŒØ¯ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ùˆ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

Ø³Ø§Ø®ØªØ§Ø± ÛŒÚ© Ø§Ø¨Ø²Ø§Ø±
Ù‡Ø± Ø§Ø¨Ø²Ø§Ø± Ø¨Ø§ÛŒØ¯ Ø¯Ø± ÛŒÚ© ÙØ§ÛŒÙ„ Ù¾Ø§ÛŒØªÙˆÙ† Ù…Ø¬Ø²Ø§ Ø¯Ø± Ù¾ÙˆØ´Ù‡ tools/ Ù‚Ø±Ø§Ø± Ú¯ÛŒØ±Ø¯ Ùˆ Ø³Ø§Ø®ØªØ§Ø± Ø²ÛŒØ± Ø±Ø§ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯:

name (str): Ù†Ø§Ù… Ù…Ù†Ø­ØµØ± Ø¨Ù‡ ÙØ±Ø¯ Ø§Ø¨Ø²Ø§Ø± (Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ Ùˆ Ø¨Ø¯ÙˆÙ† ÙØ§ØµÙ„Ù‡).

description (str): ØªÙˆØ¶ÛŒØ­ Ú©Ø§Ù…Ù„ Ùˆ Ø¯Ù‚ÛŒÙ‚ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø§Ø¨Ø²Ø§Ø± Ø¨Ù‡ Ø²Ø¨Ø§Ù† Ø·Ø¨ÛŒØ¹ÛŒ.

parameters (dict): ÛŒÚ© Ø¯ÛŒÚ©Ø´Ù†Ø±ÛŒ Ù…Ø·Ø§Ø¨Ù‚ Ø¨Ø§ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ JSON Schema Ú©Ù‡ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ ÙˆØ±ÙˆØ¯ÛŒ Ø±Ø§ ØªØ¹Ø±ÛŒÙ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

execute(self, **kwargs) (async def): Ù…ØªØ¯ Ø§ØµÙ„ÛŒ Ú©Ù‡ Ù…Ù†Ø·Ù‚ Ø§Ø¨Ø²Ø§Ø± Ø´Ù…Ø§ Ø¯Ø± Ø¢Ù† Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ ÛŒÚ© Ø¯ÛŒÚ©Ø´Ù†Ø±ÛŒ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ø®Ø±ÙˆØ¬ÛŒ Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯Ø§Ù†Ø¯.

Ù…Ø«Ø§Ù„ Ú©Ø§Ù…Ù„: Ø³Ø§Ø®Øª Ø§Ø¨Ø²Ø§Ø± get_weather
ØªÚ©Ù‡â€ŒÚ©Ø¯

# tools/weather_tool.py
from tools.base import BaseTool
import logging
import aiohttp
import chainlit as cl

logger = logging.getLogger(__name__)

class WeatherTool(BaseTool):
    name = "get_weather"
    description = "Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¢Ø¨â€ŒÙˆÙ‡ÙˆØ§ÛŒ ÙØ¹Ù„ÛŒ ÛŒÚ© Ø´Ù‡Ø± Ø®Ø§Øµ Ø±Ø§ Ø§Ø² ÛŒÚ© Ø³Ø±ÙˆÛŒØ³ Ø¢Ù†Ù„Ø§ÛŒÙ† Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒÚ©Ù†Ø¯."
    parameters = {
        "type": "object",
        "properties": {
            "city": {
                "type": "string",
                "description": "Ù†Ø§Ù… Ø´Ù‡Ø±ØŒ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù…Ø«Ø§Ù„: Tehran"
            },
            "unit": {
                "type": "string",
                "description": "ÙˆØ§Ø­Ø¯ Ø¯Ù…Ø§ØŒ 'celsius' ÛŒØ§ 'fahrenheit'. Ù¾ÛŒØ´â€ŒÙØ±Ø¶ 'celsius' Ø§Ø³Øª.",
                "enum": ["celsius", "fahrenheit"]
            }
        },
        "required": ["city"],
    }

    async def execute(self, city: str, unit: str = "celsius") -> dict:
        logger.info(f"Ø§Ø¨Ø²Ø§Ø± Ø¢Ø¨â€ŒÙˆÙ‡ÙˆØ§ Ø¨Ø±Ø§ÛŒ Ø´Ù‡Ø± '{city}' ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ø´Ø¯.")
        await cl.Message(content=f"ğŸŒ¦ï¸ Ø¯Ø± Ø­Ø§Ù„ Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¢Ø¨â€ŒÙˆÙ‡ÙˆØ§ Ø¨Ø±Ø§ÛŒ Ø´Ù‡Ø± {city}...").send()
        API_URL = f"https://wttr.in/{city}?format=j1"
        
        try:
            async with aiohttp.ClientSession() as session:
                async with session.get(API_URL) as response:
                    response.raise_for_status()
                    data = await response.json()

            current_condition = data['current_condition'][0]
            temp_key = 'temp_C' if unit == 'celsius' else 'temp_F'
            result = {
                "city": data['nearest_area'][0]['areaName'][0]['value'],
                "temperature": current_condition[temp_key],
                "condition": current_condition['weatherDesc'][0]['value'],
                "humidity": current_condition['humidity'] + "%",
                "wind_speed": current_condition['windspeedKmph'] + " km/h",
                "unit": unit
            }
            return {"status": "ok", "data": result}
        except Exception as e:
            logger.error(f"Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¢Ø¨â€ŒÙˆÙ‡ÙˆØ§: {e}")
            return {"status": "error", "error": f"Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¢Ø¨â€ŒÙˆÙ‡ÙˆØ§ Ø¨Ø±Ø§ÛŒ Ø´Ù‡Ø± '{city}' ÛŒØ§ÙØª Ù†Ø´Ø¯. Ù„Ø·ÙØ§Ù‹ Ù†Ø§Ù… Ø´Ù‡Ø± Ø±Ø§ Ø¨Ù‡ Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯."}
Ù†Ú©Ø§Øª Ú©Ù„ÛŒØ¯ÛŒ Ùˆ Ø¨Ù‡ØªØ±ÛŒÙ† Ø´ÛŒÙˆÙ‡â€ŒÙ‡Ø§
ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¯Ù‚ÛŒÙ‚ (Description): Ù…Ù‡Ù…â€ŒØªØ±ÛŒÙ† Ø¨Ø®Ø´ Ø§Ø³Øª Ú©Ù‡ Ø¨Ù‡ Ù…Ø¯Ù„ Ù…ÛŒâ€ŒÙÙ‡Ù…Ø§Ù†Ø¯ Ø§Ø¨Ø²Ø§Ø± Ú†Ù‡ Ú©Ø§Ø±ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.

Ø®Ø±ÙˆØ¬ÛŒ Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯: Ù‡Ù…ÛŒØ´Ù‡ Ø®Ø±ÙˆØ¬ÛŒ execute Ø¨Ø§ÛŒØ¯ ÛŒÚ© Ø¯ÛŒÚ©Ø´Ù†Ø±ÛŒ Ø¨Ø§ Ú©Ù„ÛŒØ¯ status Ø¨Ø§Ø´Ø¯.

Ù…Ø¯ÛŒØ±ÛŒØª Ø®Ø·Ø§: Ø§Ø² Ø¨Ù„ÙˆÚ© try...except Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø§Ø² Ú©Ø§Ø± Ø§ÙØªØ§Ø¯Ù† Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.

Ø§Ø·Ù„Ø§Ø¹â€ŒØ±Ø³Ø§Ù†ÛŒ Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±: Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² cl.Message Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø± Ù†Ø´Ø§Ù† Ø¯Ù‡ÛŒØ¯ Ú©Ù‡ Ø§Ø¨Ø²Ø§Ø± Ø¯Ø± Ø­Ø§Ù„ Ú©Ø§Ø± Ø§Ø³Øª.

Ø³Ø§Ø¯Ú¯ÛŒ: Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ Ø±Ø§ ØªÚ©â€ŒÙ…Ù†Ø¸ÙˆØ±Ù‡ Ø·Ø±Ø§Ø­ÛŒ Ú©Ù†ÛŒØ¯.
